     Использование библиотеки выделения линий LNS.DLL

Библиотека выделения линий предназначена для поиска и стирания
горизонтальных и вертикальных линий на черно-белом изображении.
На входе библиотеки имеется структура доступа к изображению
TImageAccess (обеспечивающая набор указателей на функции чтения
изображения). На выходе - заполненная структура LinesTotalInfo
и структура доступа к изображению со снятыми линиями.



     Описание функций.

LNS_FUNC( void )            LnsPageStart( TImageAccess* img );

     Назначение:
          Подготовка к работе с новой "страницей" изображения.
          Симметрична функции LnsPageFinish().

     Параметры:
          TImageAccess* img - структура доступа к исходному
          изображению
     Возвращает:
          ничего




LNS_FUNC( Bool16 )          LnsExtractLines( Int32   min_h_len,
                                             Int32   min_v_len,
                                             Int32*  result_h_count,
                                             Int32*  result_v_count,
                                             );

     Назначение:
          Поиск линий и запоминание информации о них во внутренней
          структуре. Соообщение количества найденных линий для
          подготовки к выгрузке результатов.

     Параметры:
          Int32   min_h_len - минимальная длина горизонтальных
          линий (в пикселях), но не менее 16 пикселей
          Int32   min_v_len - минимальная длина вертикальных
          линий (в пикселях), но не менее 16 пикселей
          Int32*  result_h_count - финальное количество
          горизонтальных линий
          Int32*  result_v_count - финальное количество
          вертикальных линий

     Возвращает:
          TRUE - успех, FALSE - неудача.




LNS_FUNC( Bool16 )          LnsGetCount( Int32   min_h_len,
                                        Int32   min_v_len,
                                        Int32*  result_h_count,
                                        Int32*  result_v_count,
                                        );
     Назначение:
          Ответ на запрос о количестве выделенных линий не
          короче заданной длины.

     Параметры:
          Int32   min_h_len - порог по длине для горизонтальных
          линий (в пикселях), но не менее 16 пикселей
          Int32   min_v_len - порог по длине для вертикальных
          линий (в пикселях), но не менее 16 пикселей
          Int32*  result_h_count - ответ: количество
          горизонтальных линий
          Int32*  result_v_count - ответ: количество
          вертикальных линий

     Возвращает:
          TRUE - успех, FALSE - неудача (неправильный вызов).

LNS_FUNC( Bool16 )          LnsUpload( LinesTotalInfo* lti,
                                        Int32   min_h_len,
                                        Int32   min_v_len
                                   );
     Назначение:
          Выгрузка результатов поиска линий по установленному
          порогу длины.

     Параметры:
          LinesTotalInfo* lti - структура для хранения
          выделенных линий.
          Int32   min_h_len - порог по длине для горизонтальных
          линий.
          Int32   min_v_len - порог по длине для вертикальных
          линий.

     Возвращает:
          TRUE - успех, FALSE - неудача (неправильный вызов,
          либо размер массивов отведенных под выгружаемые
          линии недостаточен).



LNS_FUNC( TImageAccess* )   LnsGetSweepedImage( LinesTotalInfo* lti );
     Назначение:
          Организация потока изображения со снятыми линиями.

     Параметры:
          LinesTotalInfo* lti - заполненная структура для
          хранения выделенных линий, в которой на тех линиях,
          которые нужно снимать проставлен флаг LI_SWEEP.

     Возвращает:
          TImageAccess* - указатель на структуру доступа к
          изображению со снятыми линиями

     Примечание:
          1. Библиотека LNS при снятии линий работает как фильтр
          на потоке изображения - в ответ на запрос очередной
          порции изображения со снятыми линиями происходит:
          - запрос к функции чтения заданной в структуре TImageAccess
          переданной в LnsPageStart();
          - снятие линий, лежащих в этой порции изображения;
          - возврат полученной порции изображения.
          2. Текущая версия библиотеки снимает только
          горизонтальные линии


LNS_FUNC( Err16 )           LnsGetError();
     Назначение:
          Сообщение о последней ошибке.

     Параметры:
          нет.

     Возвращает:
          код ошибки, определенный в "globus.h"


LNS_FUNC( void )            LnsPageFinish();
     Назначение:
          Освобождение внутренней информации о линиях текущей
          страницы

     Параметры:
          нет.

     Возвращает:
          ничего.

     Примечание:
          может вызываться несколько раз.



	Примечания для разработчиков.

Стек аппликации, использующей библиотеку должен быть
не менее 16К.

Модель компиляции 16-битных библиотек и вызывающей аппликации
- LARGE.

Стандартные C-runtime библиотеки должны подлинковываться 
динамически.

Текущая версия библиотеки снимает только горизонтальные линии,
причем делает это быстро, но достаточно грубо. Фактически, 
использование библиотеки для снятия линий дает хороший результат
в случае работы с текстом КАСАЮЩИМСЯ линий (как это часто бывает
в случае полиграфического заполнения, например, таблиц).
В более сложных случаях наползания текстов на разграфку,
(например, впечатанный на пишущей машинке текст ПЕРЕСЕКАЮЩИЙ линии 
разграфки) снятие линий лучше производить другими средствами, 
использующими более информативное серое изображение или 
способы цветовой фильтрации.


